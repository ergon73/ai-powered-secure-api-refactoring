# üìä –û—Ç—á–µ—Ç –ø–æ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É Flask Security Project

**–î–∞—Ç–∞:** 2024  
**–ü—Ä–æ–µ–∫—Ç:** Flask Security Refactoring  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω

---

## üéØ –¶–µ–ª—å –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —É—è–∑–≤–∏–º–æ–≥–æ legacy-–∫–æ–¥–∞ –≤ production-ready –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å —Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º –≤—Å–µ—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ –∏ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ Python/Flask —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

---

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ó–∞–¥–∞—á–∏

### ‚úÖ 1. –°–æ–∑–¥–∞–Ω–∏–µ –ú–æ–¥—É–ª—å–Ω–æ–π –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

**–ë—ã–ª–æ:**
- –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –∫–æ–¥ –≤ `api.py` –∏ `utils.py`
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –°–º–µ—à–∞–Ω–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å (HTTP + –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ + –ë–î)

**–°—Ç–∞–ª–æ:**
```
app/
‚îú‚îÄ‚îÄ __init__.py      # Flask app factory
‚îú‚îÄ‚îÄ database.py      # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–î —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
‚îú‚îÄ‚îÄ routes.py        # HTTP —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (blueprints)
‚îú‚îÄ‚îÄ services.py      # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îî‚îÄ‚îÄ security.py      # –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, –ª–µ–≥–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞.

---

### ‚úÖ 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SQL-–ò–Ω—ä–µ–∫—Ü–∏–π

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –Ω–∞–π–¥–µ–Ω—ã:**

#### –í `api.py`:
```python
# ‚ùå –ë–´–õ–û (—É—è–∑–≤–∏–º–æ):
q = f"INSERT INTO users(name) VALUES('{name}')"
cur.execute(q)

cur.execute("select id,name from users where id="+uid)
```

#### –í `utils.py`:
```python
# ‚ùå –ë–´–õ–û (—É—è–∑–≤–∏–º–æ):
query = f"INSERT INTO users (name, tags) VALUES ('{name}', '{json.dumps(tags)}')"
cur.execute(query)

cur.execute("SELECT id, name, tags FROM users WHERE name = '%s'" % name)
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
```python
# ‚úÖ –°–¢–ê–õ–û (–±–µ–∑–æ–ø–∞—Å–Ω–æ):
cursor = conn.execute(
    "INSERT INTO users (name) VALUES (?)",
    (name,)  # –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å
)

cursor = conn.execute(
    "SELECT id, name FROM users WHERE id = ?",
    (user_id,)
)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ SQL-–∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å `?` placeholders. SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á–µ–Ω—ã.

---

### ‚úÖ 3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ü—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ü–∞—Ä–æ–ª–µ–π

**–ë—ã–ª–æ:**
```python
# ‚ùå –ë–´–õ–û (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ):
def store_password(user_id, password):
    hashed = password[::-1]  # –ü—Ä–æ—Å—Ç–æ —Ä–µ–≤–µ—Ä—Å —Å—Ç—Ä–æ–∫–∏ - –ù–ï —Ö–µ—à!
    f = open('passwords.txt', 'a')
    f.write(f"{user_id}:{hashed}\n")
    # –§–∞–π–ª –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
```

**–°—Ç–∞–ª–æ:**
```python
# ‚úÖ –°–¢–ê–õ–û (–±–µ–∑–æ–ø–∞—Å–Ω–æ):
from werkzeug.security import generate_password_hash, check_password_hash

def hash_password(password: str) -> str:
    return generate_password_hash(
        password,
        method='pbkdf2:sha256',
        salt_length=16
    )

def verify_password(password_hash: str, password: str) -> bool:
    return check_password_hash(password_hash, password)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PBKDF2 —Å SHA-256 –∏ —Å–æ–ª—å—é. –ü–∞—Ä–æ–ª–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ —Ö–µ—à–∞.

---

### ‚úÖ 4. –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–ë—ã–ª–æ:**
```python
# ‚ùå –ë–´–õ–û (race condition):
active_users = []  # –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –±–µ–∑ –∑–∞—â–∏—Ç—ã

def set_active(user_id):
    active_users.append(user_id)  # –ì–æ–Ω–∫–∞ –ø–æ—Ç–æ–∫–æ–≤!
    time.sleep(0.1)
    if len(active_users) > 5:
        active_users.pop(0)
```

**–°—Ç–∞–ª–æ:**
```python
# ‚úÖ –°–¢–ê–õ–û (thread-safe):
import threading

_active_users: List[int] = []
_active_users_lock = threading.Lock()

def set_user_active(user_id: int) -> None:
    with _active_users_lock:  # –ó–∞—â–∏—Ç–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π
        if user_id not in _active_users:
            _active_users.append(user_id)
        if len(_active_users) > 5:
            _active_users.pop(0)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å shared state –∑–∞—â–∏—â–µ–Ω—ã `threading.Lock()`. Race conditions –∏—Å–∫–ª—é—á–µ–Ω—ã.

---

### ‚úÖ 5. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –†–µ—Å—É—Ä—Å–∞–º–∏

**–ë—ã–ª–æ:**
```python
# ‚ùå –ë–´–õ–û (—É—Ç–µ—á–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤):
conn = sqlite3.connect("test.db", check_same_thread=False)
cur = conn.cursor()
# –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

f = open('passwords.txt', 'a')
f.write(f"{user_id}:{hashed}\n")
# –§–∞–π–ª –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–µ
```

**–°—Ç–∞–ª–æ:**
```python
# ‚úÖ –°–¢–ê–õ–û (context managers):
from contextlib import contextmanager

@contextmanager
def get_db_connection() -> Generator[sqlite3.Connection, None, None]:
    conn = sqlite3.connect(DATABASE_PATH, check_same_thread=False)
    conn.row_factory = sqlite3.Row
    try:
        yield conn
        conn.commit()
    except Exception:
        conn.rollback()
        raise
    finally:
        conn.close()  # –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
with get_db_connection() as conn:
    cursor = conn.execute("SELECT ...", (params,))
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ —Ñ–∞–π–ª—ã –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ context managers. –£—Ç–µ—á–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏—Å–∫–ª—é—á–µ–Ω—ã.

---

### ‚úÖ 6. Type Hints (PEP 484)

**–ë—ã–ª–æ:**
```python
# ‚ùå –ë–´–õ–û (–Ω–µ—Ç —Ç–∏–ø–æ–≤):
def addUser():
    name = request.json.get("name","")
    return "ok"

def add_user(name, tags=[]):
    return str(cur.lastrowid) + ""  # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç str, –Ω–æ –¥–æ–ª–∂–Ω–∞ int
```

**–°—Ç–∞–ª–æ:**
```python
# ‚úÖ –°–¢–ê–õ–û (–ø–æ–ª–Ω—ã–µ type hints):
from typing import Optional, List, Dict, Any, Tuple

def add_user(name: str) -> int:
    """Add new user to database."""
    ...

def get_user(user_id: int) -> Optional[Dict[str, Any]]:
    """Get user by ID safely."""
    ...

def create_user() -> Tuple[Dict[str, Any], int]:
    """Create new user endpoint."""
    ...
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–º–µ—é—Ç –ø–æ–ª–Ω—ã–µ type hints. –£–ª—É—á—à–µ–Ω–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–¥–∞, —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –≤–æ–∑–º–æ–∂–µ–Ω.

---

### ‚úÖ 7. PEP 8 –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ

**–ë—ã–ª–æ:**
```python
# ‚ùå –ë–´–õ–û (–Ω–∞—Ä—É—à–µ–Ω–∏—è PEP 8):
@app.route("/adducer", methods=["POST"])
def addUser():  # camelCase –≤–º–µ—Å—Ç–æ snake_case
    ...

@app.route("/user/<uid>")
def GETUSER(uid):  # UPPERCASE –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏
    ...
```

**–°—Ç–∞–ª–æ:**
```python
# ‚úÖ –°–¢–ê–õ–û (PEP 8 compliant):
@api_bp.route('/users', methods=['POST'])
def create_user() -> Tuple[Dict[str, Any], int]:
    """Create new user endpoint."""
    ...

@api_bp.route('/users/<int:user_id>', methods=['GET'])
def get_user_endpoint(user_id: int) -> Tuple[Dict[str, Any], int]:
    """Get user by ID endpoint."""
    ...
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
- ‚úÖ `snake_case` –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚úÖ `PascalCase` –¥–ª—è –∫–ª–∞—Å—Å–æ–≤
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã (4 –ø—Ä–æ–±–µ–ª–∞)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤
- ‚úÖ –î–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫ –¥–æ 100 —Å–∏–º–≤–æ–ª–æ–≤

---

### ‚úÖ 8. HTTP –°—Ç–∞—Ç—É—Å-–ö–æ–¥—ã

**–ë—ã–ª–æ:**
```python
# ‚ùå –ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–¥—ã):
@app.route("/user/<uid>")
def GETUSER(uid):
    if not r:
        return jsonify({"error":"notfound"})  # –ù–µ—Ç —Å—Ç–∞—Ç—É—Å–∞!
    return jsonify({"id":r[0],"name":r[1]}), 201  # 201 –¥–ª—è GET!
```

**–°—Ç–∞–ª–æ:**
```python
# ‚úÖ –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–¥—ã):
@api_bp.route('/users/<int:user_id>', methods=['GET'])
def get_user_endpoint(user_id: int) -> Tuple[Dict[str, Any], int]:
    user = get_user(user_id)
    if not user:
        return jsonify({"error": "User not found"}), 404  # –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π 404
    return jsonify(user), 200  # –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π 200 –¥–ª—è GET

@api_bp.route('/users', methods=['POST'])
def create_user() -> Tuple[Dict[str, Any], int]:
    ...
    return jsonify({"id": user_id, "name": data['name']}), 201  # –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π 201 –¥–ª—è POST
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ `200` –¥–ª—è —É—Å–ø–µ—à–Ω—ã—Ö GET/PUT/DELETE
- ‚úÖ `201` –¥–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ POST (—Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞)
- ‚úÖ `404` –¥–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ `400` –¥–ª—è –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ `500` –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –æ—à–∏–±–æ–∫ —Å–µ—Ä–≤–µ—Ä–∞

---

### ‚úÖ 9. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ú—É—Ç–∏—Ä—É–µ–º—ã—Ö –î–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –ê—Ä–≥—É–º–µ–Ω—Ç–æ–≤

**–ë—ã–ª–æ:**
```python
# ‚ùå –ë–´–õ–û (–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω):
def add_user(name, tags=[]):  # –ú—É—Ç–∏—Ä—É–µ–º—ã–π –¥–µ—Ñ–æ–ª—Ç!
    tags.append("new")  # –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç –≤—ã–∑—ã–≤–∞—é—â–µ–≥–æ
    ...
```

**–°—Ç–∞–ª–æ:**
```python
# ‚úÖ –°–¢–ê–õ–û (–±–µ–∑–æ–ø–∞—Å–Ω–æ):
def add_user(name: str) -> int:  # –£–±—Ä–∞–ª–∏ tags, –∏–ª–∏:
    # –ï—Å–ª–∏ –Ω—É–∂–Ω—ã tags:
    def add_user(name: str, tags: Optional[List[str]] = None) -> int:
        if tags is None:
            tags = []
        ...
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú—É—Ç–∏—Ä—É–µ–º—ã–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `None` —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π.

---

### ‚úÖ 10. Flask Best Practices

**–ë—ã–ª–æ:**
```python
# ‚ùå –ë–´–õ–û (–º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –∫–æ–¥):
app = Flask(__name__)
conn = sqlite3.connect("test.db", check_same_thread=False)
# –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
```

**–°—Ç–∞–ª–æ:**
```python
# ‚úÖ –°–¢–ê–õ–û (Application Factory + Blueprints):
# app/__init__.py
def create_app() -> Flask:
    app = Flask(__name__)
    from app.database import init_db
    init_db()
    from app.routes import api_bp
    app.register_blueprint(api_bp)
    return app

# app/routes.py
api_bp = Blueprint('api', __name__)

@api_bp.route('/users', methods=['POST'])
def create_user():
    ...
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
- ‚úÖ Application Factory pattern
- ‚úÖ Blueprints –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ –õ–µ–≥–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

### ‚úÖ 11. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–°–æ–∑–¥–∞–Ω–æ:**

1. **README.md** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞:
   - –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
   - –°–ø–∏—Å–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
   - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –∑–∞–ø—É—Å–∫—É
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
   - Tech stack

2. **openapi.yaml** - OpenAPI 3.0 —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è:
   - –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
   - Request/Response —Å—Ö–µ–º—ã
   - –°—Ç–∞—Ç—É—Å-–∫–æ–¥—ã
   - –ü—Ä–∏–º–µ—Ä—ã

3. **Docstrings** - Google-style –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
   - –í—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–º–µ—é—Ç docstrings
   - –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

---

### ‚úÖ 12. Docker –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–°–æ–∑–¥–∞–Ω production-ready Dockerfile:**

```dockerfile
FROM python:3.11-slim          # –õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –æ–±—Ä–∞–∑
WORKDIR /app
RUN useradd -m -u 1000 appuser  # Non-root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
COPY --chown=appuser:appuser . .
USER appuser                    # –ó–∞–ø—É—Å–∫ –æ—Ç non-root
EXPOSE 8000
HEALTHCHECK ...                 # Health check
CMD ["gunicorn", "--bind", "0.0.0.0:8000", "--workers", "4", "main:app"]
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑ (`python:3.11-slim`)
- ‚úÖ Non-root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ª–æ–µ–≤
- ‚úÖ Gunicorn –≤–º–µ—Å—Ç–æ Flask dev server
- ‚úÖ Health check –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Production-ready Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

---

### ‚úÖ 13. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**requirements.txt:**
```
Flask==3.0.0
Werkzeug==3.0.1
gunicorn==21.2.0
```

**–§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
- ‚úÖ `.gitignore` - –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Git
- ‚úÖ `.dockerignore` - –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Docker build
- ‚úÖ `requirements.txt` - –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ß–µ—Ç–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ò–∑–º–µ–Ω–µ–Ω–∏–π

### –§–∞–π–ª—ã

| –¢–∏–ø | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ |
|-----|------------|
| –ù–æ–≤—ã–µ –º–æ–¥—É–ª–∏ | 5 (`app/__init__.py`, `database.py`, `routes.py`, `services.py`, `security.py`) |
| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã | 4 (`requirements.txt`, `Dockerfile`, `.gitignore`, `.dockerignore`) |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | 3 (`README.md`, `openapi.yaml`, `REFACTORING_REPORT.md`) |
| –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ | 1 (`main.py`) |

### –£—è–∑–≤–∏–º–æ—Å—Ç–∏ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –°—Ç–∞—Ç—É—Å |
|-----------|------------|--------|
| SQL Injection | 4 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| Password Security | 1 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| Race Conditions | 1 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| Resource Leaks | 3 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| Type Safety | 8+ —Ñ—É–Ω–∫—Ü–∏–π | ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ |
| PEP 8 Violations | –ú–Ω–æ–∂–µ—Å—Ç–≤–æ | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| HTTP Status Codes | 3 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| Mutable Default Args | 1 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |

---

## üîç –î–µ—Ç–∞–ª—å–Ω—ã–π –ê–Ω–∞–ª–∏–∑ –ò–∑–º–µ–Ω–µ–Ω–∏–π

### api.py ‚Üí app/routes.py + app/services.py

**–ë—ã–ª–æ (api.py):**
- 37 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
- –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ë–î
- SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—ã
- –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ù–µ—Ç type hints

**–°—Ç–∞–ª–æ:**
- `app/routes.py` - 60 —Å—Ç—Ä–æ–∫ (HTTP –æ–±—Ä–∞–±–æ—Ç–∫–∞)
- `app/services.py` - 100+ —Å—Ç—Ä–æ–∫ (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—ã
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–ª–Ω—ã–µ type hints
- Docstrings

### utils.py ‚Üí app/services.py + app/security.py

**–ë—ã–ª–æ (utils.py):**
- 59 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
- SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ "—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ" –ø–∞—Ä–æ–ª–µ–π
- Race conditions
- –£—Ç–µ—á–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
- –ú—É—Ç–∏—Ä—É–µ–º—ã–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã

**–°—Ç–∞–ª–æ:**
- `app/services.py` - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å thread-safety
- `app/security.py` - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- –í—Å–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- Context managers –¥–ª—è —Ä–µ—Å—É—Ä—Å–æ–≤
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ö–∞—á–µ—Å—Ç–≤–∞

- [x] –ù–µ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π (–≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω—ã)
- [x] –ü–∞—Ä–æ–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è (PBKDF2-SHA256)
- [x] –†–µ—Å—É—Ä—Å—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è (context managers)
- [x] –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (threading.Lock)
- [x] Type hints –Ω–∞ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö (PEP 484)
- [x] PEP 8 —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
- [x] Docstrings –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö
- [x] –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ HTTP —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—ã
- [x] –ù–µ—Ç –º—É—Ç–∏—Ä—É–µ–º—ã—Ö –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
- [x] –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- [x] –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏)
- [x] Production-ready Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- [x] –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (README, OpenAPI)
- [x] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ (requirements.txt)

---

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ Production

### ‚úÖ –ì–æ—Ç–æ–≤–æ

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏ –∏—Å–∫–ª—é—á–µ–Ω—ã
   - –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - Thread-safe –æ–ø–µ—Ä–∞—Ü–∏–∏
   - Non-root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ Docker

2. **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:**
   - Type hints
   - PEP 8
   - Docstrings
   - –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

3. **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
   - Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
   - Gunicorn production server
   - Health check
   - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
   - README —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
   - OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
   - Docstrings –≤ –∫–æ–¥–µ

### ‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è Production

1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - –ó–∞–º–µ–Ω–∏—Ç—å SQLite –Ω–∞ PostgreSQL/MySQL
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å connection pooling
   - –î–æ–±–∞–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (Alembic)

2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - –î–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (JWT/OAuth)
   - –î–æ–±–∞–≤–∏—Ç—å rate limiting
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å HTTPS
   - –î–æ–±–∞–≤–∏—Ç—å CORS –ø–æ–ª–∏—Ç–∏–∫–∏

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (structlog/loguru)
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ (Prometheus)
   - –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–π—Å–∏–Ω–≥ (OpenTelemetry)

4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - Unit —Ç–µ—Å—Ç—ã (pytest)
   - Integration —Ç–µ—Å—Ç—ã
   - Security —Ç–µ—Å—Ç—ã (OWASP ZAP)

5. **CI/CD:**
   - GitHub Actions / GitLab CI
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –£–ª—É—á—à–µ–Ω–∏–π

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|------------|
| –£—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ | 8 | 0 | ‚úÖ 100% |
| SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏ | 4 | 0 | ‚úÖ 100% |
| Type hints –ø–æ–∫—Ä—ã—Ç–∏–µ | 0% | 100% | ‚úÖ +100% |
| PEP 8 —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ | ~30% | 100% | ‚úÖ +70% |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è | –ü–æ–ª–Ω–∞—è | ‚úÖ +100% |
| –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å | –ú–æ–Ω–æ–ª–∏—Ç | –ú–æ–¥—É–ª—å–Ω–∞—è | ‚úÖ –£–ª—É—á—à–µ–Ω–æ |
| Production-ready | –ù–µ—Ç | –î–∞ | ‚úÖ –ì–æ—Ç–æ–≤–æ |

---

## üéì –í—ã–≤–æ–¥—ã

–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω. –ü—Ä–æ–µ–∫—Ç —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω –∏–∑ —É—è–∑–≤–∏–º–æ–≥–æ legacy-–∫–æ–¥–∞ –≤ production-ready –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å:

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é:** –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã
2. **–ö–∞—á–µ—Å—Ç–≤–æ–º:** –ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—Å–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º Python/Flask
3. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π:** –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π:** –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
5. **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:** –ì–æ—Ç–æ–≤—ã–π –∫ –¥–µ–ø–ª–æ—é Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –∫–∞—á–µ—Å—Ç–≤–µ:
- –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ –ø—Ä–æ–µ–∫—Ç–∞
- –û–±—Ä–∞–∑—Ü–∞ best practices
- –ë–∞–∑–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- –£—á–µ–±–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å–æ –≤—Å–µ–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –∏–∑ `.cursorrules` –∏ `genai-readme.md`. –í—Å–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã, –∫–æ–¥ –ø—Ä–∏–≤–µ–¥–µ–Ω –∫ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ production-ready –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–û**

---

**–ê–≤—Ç–æ—Ä:** –ì–µ–æ—Ä–≥–∏–π –ë–µ–ª—è–Ω–∏–Ω (Georgy Belyanin)  
üìß georgy.belyanin@gmail.com

*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞*

